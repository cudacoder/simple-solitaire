{"version":3,"file":"game.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/main.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import './styles/solitaire.css';\r\n\r\nconst CARD_WIDTH = 500;\r\nconst CARD_HEIGHT = 726;\r\nconst CARD_SIZE_X = CARD_WIDTH / 6;\r\nconst CARD_SIZE_Y = CARD_HEIGHT / 6;\r\nconst CANVAS_WIDTH = document.documentElement.clientWidth;\r\nconst CANVAS_HEIGHT = document.documentElement.clientHeight;\r\nconst SUITS_TO_COLORS = ['black', 'red', 'red', 'black']\r\n\r\nconst DEBUG_WIN = false;\r\nconst Sprites = new Image();\r\nconst GameState = { elements: { foundations: [], tableaus: [], cards: [], deck: null } , win: false };\r\n\r\nconst canvas = document.getElementById('game');\r\n/** @type CanvasRenderingContext2D */\r\nconst ctx = canvas.getContext('2d');\r\n\r\ncanvas.onmouseup = function(e) { handleMouseUp(e); };\r\ncanvas.onmousedown = function(e) { handleMouseDown(e); };\r\ncanvas.onmousemove = function(e) { handleMouseMove(e); };\r\n\r\ncanvas.width = CANVAS_WIDTH;\r\ncanvas.height = CANVAS_HEIGHT;\r\ncanvas.style.width = CANVAS_WIDTH;\r\ncanvas.style.height = CANVAS_HEIGHT;\r\n\r\nSprites.onload = setup;\r\nSprites.src = 'cards-spritesheet.png';\r\n\r\nlet lastMousePoint;\r\nlet isDown = false;\r\nlet draggedCard = null;\r\n\r\nArray.prototype.random = function() {\r\n\tlet randomIndex = Math.floor(Math.random() * this.length);\r\n\treturn [randomIndex, this[randomIndex]];\r\n};\r\n\r\nArray.prototype.last = function() {\r\n\treturn this[this.length - 1];\r\n};\r\n\r\nfunction isColliding(rect1, rect2) {\r\n\tif (rect1.point.x < rect2.point.x + rect2.width &&\r\n\t\trect1.point.x + rect1.width > rect2.point.x &&\r\n\t\trect1.point.y < rect2.point.y + rect2.height &&\r\n\t\trect1.point.y + rect1.height > rect2.point.y) {\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction getMousePos(canvas, evt) {\r\n\tlet rect = canvas.getBoundingClientRect();\r\n\treturn new Point(evt.clientX - rect.left, evt.clientY - rect.top);\r\n}\r\n\r\nfunction isClicked(mousePoint, element) {\r\n\tlet heightHit = mousePoint.y > element.point.y && mousePoint.y < element.point.y + element.height;\r\n\tlet widthHit = mousePoint.x > element.point.x && mousePoint.x < element.point.x + element.width;\r\n\treturn heightHit && widthHit;\r\n}\r\n\r\nfunction checkWinState() {\r\n\tGameState.win = GameState.elements.foundations.every(f => f.topCard && f.topCard.number === 13);\r\n}\r\n\r\nfunction Point(x,y) {\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\tthis.translate = (xAmount, yAmount) => {\r\n\t\tthis.x += xAmount;\r\n\t\tthis.y += yAmount;\r\n\t}\r\n}\r\n\r\nfunction Deck(point) {\r\n\tthis.cards = [];\r\n\tthis.point = point;\r\n\tthis.width = CARD_SIZE_X;\r\n\tthis.height = CARD_SIZE_Y;\r\n\tthis.reset = () => {\r\n\t\tGameState.elements.cards = [...this.cards];\r\n\t\tthis.cards = [];\r\n\t};\r\n\tthis.remove = card => {\r\n\t\tthis.cards.splice(this.cards.indexOf(card), 1);\r\n\t};\r\n\tthis.push = card => {\r\n\t\tcard.parent = this;\r\n\t\tcard.hidden = false;\r\n\t\tcard.point = new Point(this.point.x + CARD_SIZE_X + 50, this.point.y);\r\n\t\tcard.origPoint = Object.assign({}, card.point);\r\n\t\tthis.cards.push(card);\r\n\t};\r\n\tthis.draw = () => {\r\n\t\tctx.save();\r\n\t\tctx.fillStyle = 'yellow';\r\n\t\tctx.strokeStyle = 'white';\r\n\t\tctx.fillRect(this.point.x, this.point.y, CARD_SIZE_X, CARD_SIZE_Y);\r\n\t\tctx.strokeRect(this.point.x, this.point.y, CARD_SIZE_X, CARD_SIZE_Y);\r\n\t\tctx.restore();\r\n\t};\r\n}\r\n\r\nfunction Card(number, suit, point = {x: 0, y: 0}) {\r\n\tthis.children = [];\r\n\tthis.parent = {};\r\n\tthis.suit = suit;\r\n\tthis.point = point;\r\n\tthis.origPoint = {};\r\n\tthis.color = SUITS_TO_COLORS[suit];\r\n\tthis.width = CARD_SIZE_X;\r\n\tthis.height = CARD_SIZE_Y;\r\n\tthis.number = number;\r\n\tthis.hidden = true;\r\n\tthis.reset = () => {\r\n\t\tthis.point = Object.assign({}, this.origPoint);\r\n\t}\r\n\tthis.draw = () => {\r\n\t\tctx.save();\r\n\t\tif (!this.hidden) {\r\n\t\t\tctx.drawImage(Sprites, this.suit * CARD_WIDTH, (this.number - 1) * CARD_HEIGHT, CARD_WIDTH, CARD_HEIGHT, this.point.x, this.point.y, CARD_SIZE_X, CARD_SIZE_Y);\r\n\t\t} else {\r\n\t\t\tctx.fillStyle = 'orange';\r\n\t\t\tctx.strokeStyle = 'white';\r\n\t\t\tctx.fillRect(this.point.x, this.point.y, CARD_SIZE_X, CARD_SIZE_Y);\r\n\t\t\tctx.strokeRect(this.point.x, this.point.y, CARD_SIZE_X, CARD_SIZE_Y);\r\n\t\t}\r\n\t\tctx.restore();\r\n\t};\r\n}\r\n\r\nfunction Foundation(point, suit) {\r\n\tthis.suit = suit;\r\n\tthis.nextNumber = 1;\r\n\tthis.cards = [];\r\n\tthis.width = CARD_SIZE_X + 5;\r\n\tthis.height = CARD_SIZE_Y + 5;\r\n\tthis.point = Object.assign({}, point);\r\n\tthis.isPushable = card => this.suit === card.suit && this.nextNumber === card.number;\r\n\tthis.push = card => {\r\n\t\tthis.nextNumber += 1;\r\n\t\tcard.point = new Point(this.point.x, this.point.y);\r\n\t\tcard.origPoint = Object.assign({}, card.point);\r\n\t\tthis.cards.push(card);\r\n\t};\r\n\tthis.draw = () => {\r\n\t\tctx.save();\r\n\t\tif (this.cards.length === 0) {\r\n\t\t\tctx.fillStyle = 'darkblue';\r\n\t\t\tctx.fillRect(this.point.x, this.point.y, this.width, this.height);\r\n\t\t} else {\r\n\t\t\tthis.cards.forEach(c => c.draw());\r\n\t\t}\r\n\t\tctx.restore();\r\n\t}\r\n\tObject.defineProperty(this, 'topCard', {\r\n\t\tget() {\r\n\t\t\treturn this.cards[this.cards.length - 1];\r\n\t\t}\r\n\t});\r\n};\r\n\r\nfunction Tableau(point) {\r\n\tthis.cards = [];\r\n\tthis.point = Object.assign({}, point);\r\n\tthis.width = CARD_SIZE_X;\r\n\tthis.isPushable = card => {\r\n\t\tif (this.cards.length === 0) {\r\n\t\t\treturn card.number === 13;\r\n\t\t}\r\n\t\treturn this.topCard.color !== card.color && this.topCard.number === card.number + 1;\r\n\t};\r\n\tthis.push = card => {\r\n\t\tcard.point = new Point(this.point.x, this.point.y + (25 * this.cards.length));\r\n\t\tcard.origPoint = Object.assign({}, card.point);\r\n\t\tcard.parent = this;\r\n\t\tthis.cards.push(card);\r\n\t};\r\n\tthis.remove = card => {\r\n\t\tthis.cards.splice(this.cards.indexOf(card), 1);\r\n\t};\r\n\tthis.draw = () => {\r\n\t\tctx.save();\r\n\t\tctx.strokeStyle = 'white';\r\n\t\tctx.strokeRect(this.point.x, this.point.y, this.width, CARD_SIZE_Y);\r\n\t\tthis.cards.forEach(c => c.draw());\r\n\t\tctx.restore();\r\n\t};\r\n\tthis.showCard = () => {\r\n\t\tthis.topCard.hidden = false;\r\n\t};\r\n\tObject.defineProperty(this, 'topCard', {\r\n\t\tget() {\r\n\t\t\treturn this.cards[this.cards.length - 1];\r\n\t\t}\r\n\t});\r\n\tObject.defineProperty(this, 'height', {\r\n\t\tget() {\r\n\t\t\treturn this.cards.length * 25 + CARD_SIZE_Y;\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction setup() {\r\n\tconst nextFoundationPoint = new Point(250, 10);\r\n\tconst nextTableauPoint = new Point(CANVAS_WIDTH / 12, CANVAS_HEIGHT / 3.5)\r\n\r\n\t// Cards\r\n\tfor (let i = 0; i < 4; i++) {\r\n\t\tfor (let j = 0; j < 13; j++) {\r\n\t\t\tGameState.elements.cards.push(new Card(j + 1, i));\r\n\t\t}\r\n\t}\r\n\r\n\t// Foundations\r\n\tfor (let i = 0; i < 4; i++) {\r\n\t\tlet f = new Foundation(nextFoundationPoint, i);\r\n\t\tGameState.elements.foundations.push(f);\r\n\t\tnextFoundationPoint.translate(140, 0);\r\n\t}\r\n\r\n\tif (DEBUG_WIN) {\r\n\t\tlet onlyClubs = GameState.elements.cards.filter(c => c.suit === 0);\r\n\t\tlet onlyDiamonds = GameState.elements.cards.filter(c => c.suit === 1);\r\n\t\tlet onlyHearts = GameState.elements.cards.filter(c => c.suit === 2);\r\n\t\tlet onlySpades = GameState.elements.cards.filter(c => c.suit === 3);\r\n\t\tGameState.elements.foundations.forEach(f => {\r\n\t\t\tswitch(f.suit) {\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tonlyClubs.forEach(c => {\r\n\t\t\t\t\t\tc.hidden = false;\r\n\t\t\t\t\t\tf.push(c);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tonlyDiamonds.forEach(c => {\r\n\t\t\t\t\t\tc.hidden = false;\r\n\t\t\t\t\t\tf.push(c);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tonlyHearts.forEach(c => {\r\n\t\t\t\t\t\tc.hidden = false;\r\n\t\t\t\t\t\tf.push(c);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tonlySpades.forEach(c => {\r\n\t\t\t\t\t\tc.hidden = false;\r\n\t\t\t\t\t\tf.push(c);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t\tcheckWinState();\r\n\t} else {\r\n\t\t// Tableaus\r\n\t\tfor (let i = 0; i < 7; i++) {\r\n\t\t\tlet t = new Tableau(nextTableauPoint);\r\n\t\t\tfor (let j = 0; j < i + 1; j++) {\r\n\t\t\t\tlet [index, randomCard] = GameState.elements.cards.random();\r\n\t\t\t\trandomCard.hidden = j !== i;\r\n\t\t\t\tGameState.elements.cards.splice(index, 1);\r\n\t\t\t\tt.push(randomCard);\r\n\t\t\t}\r\n\t\t\tGameState.elements.tableaus.push(t);\r\n\t\t\tnextTableauPoint.translate(CARD_SIZE_X + 30, 0);\r\n\t\t}\r\n\t}\r\n\r\n\t// Deck\r\n\tlet deckPos = new Point(CANVAS_WIDTH - (CANVAS_WIDTH - 70), CANVAS_HEIGHT - 200);\r\n\tGameState.elements.deck = new Deck(deckPos);\r\n\r\n\tdraw();\r\n}\r\n\r\nfunction draw() {\r\n\tctx.clearRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);\r\n\tGameState.elements.foundations.forEach(f => f.draw());\r\n\tGameState.elements.tableaus.forEach(t => t.draw());\r\n\tGameState.elements.deck.draw();\r\n\tGameState.elements.deck.cards.forEach(c => c.draw());\r\n\tif (GameState.win) {\r\n\t\tctx.font = '30px Verdana';\r\n\t\tlet gradient = ctx.createLinearGradient(0, 0, canvas.width, 0);\r\n\t\tgradient.addColorStop('0', 'magenta');\r\n\t\tgradient.addColorStop('0.5', 'blue');\r\n\t\tgradient.addColorStop('1.0', 'red');\r\n\t\tctx.fillStyle = gradient;\r\n\t\tctx.fillText('You Win!', CANVAS_WIDTH - (CANVAS_WIDTH - 450) , CANVAS_HEIGHT - 650);\r\n\t}\r\n}\r\n\r\nfunction handleMouseDown(e) {\r\n\te.preventDefault();\r\n\te.stopPropagation();\r\n\r\n\tlastMousePoint = getMousePos(canvas, e);\r\n\r\n\tGameState.elements.tableaus.forEach(t => {\r\n\t\tif (isClicked(lastMousePoint, t) && t.cards.length !== 0){\r\n\t\t\tlet shownCards = t.cards.filter(c => !c.hidden);\r\n\t\t\tif (shownCards.length === 0) {\r\n\t\t\t\tt.showCard();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tshownCards.reverse();\r\n\t\t\tlet clickedCardIndex = shownCards.findIndex(c => isClicked(lastMousePoint, c));\r\n\t\t\tif (clickedCardIndex === 0) {\r\n\t\t\t\tdraggedCard = shownCards[0];\r\n\t\t\t} else {\r\n\t\t\t\tdraggedCard = shownCards.slice(0, clickedCardIndex + 1).reverse();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t// Deck cards check\r\n\tGameState.elements.deck.cards.forEach( c => {\r\n\t\tif (isClicked(lastMousePoint, c)) {\r\n\t\t\tdraggedCard = c;\r\n\t\t}\r\n\t});\r\n\r\n\t// Deck click check\r\n\tif (isClicked(lastMousePoint, GameState.elements.deck)) {\r\n\t\tif (GameState.elements.cards.length === 0) {\r\n\t\t\tGameState.elements.deck.reset();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tGameState.elements.deck.push(GameState.elements.cards.pop());\r\n\t}\r\n\r\n\tisDown = true;\r\n}\r\n\r\nfunction handleMouseMove(e) {\r\n\tif (!isDown || !draggedCard) { return; }\r\n\r\n\te.preventDefault();\r\n\te.stopPropagation();\r\n\r\n\tlet mousePoint = getMousePos(canvas, e);\r\n\r\n\tlet dx = mousePoint.x - lastMousePoint.x;\r\n\tlet dy = mousePoint.y - lastMousePoint.y;\r\n\r\n\tlastMousePoint = new Point(mousePoint.x, mousePoint.y);\r\n\r\n\tif (Array.isArray(draggedCard)){\r\n\t\tdraggedCard.forEach(c => {\r\n\t\t\tc.point.x += dx;\r\n\t\t\tc.point.y += dy;\r\n\t\t});\r\n\t} else {\r\n\t\tdraggedCard.point.x += dx;\r\n\t\tdraggedCard.point.y += dy;\r\n\t}\r\n\r\n\tdraw();\r\n}\r\n\r\nfunction handleMouseUp(e) {\r\n\te.preventDefault();\r\n\te.stopPropagation();\r\n\r\n\tlet hitElement;\r\n\r\n\tif (draggedCard && !Array.isArray(draggedCard)) {\r\n\t\thitElement = GameState.elements.foundations.find(f => isColliding(draggedCard, f));\r\n\t\thitElement = !hitElement ? GameState.elements.tableaus.find(t => isColliding(draggedCard, t)) : hitElement;\r\n\t\tif (hitElement && hitElement.isPushable(draggedCard)) {\r\n\t\t\tdraggedCard.parent.remove(draggedCard);\r\n\t\t\thitElement.push(draggedCard);\r\n\t\t\tcheckWinState();\r\n\t\t} else {\r\n\t\t\tdraggedCard.reset();\r\n\t\t}\r\n\t\tdraggedCard = null;\r\n\t} else if (Array.isArray(draggedCard)) {\r\n\t\tlet topCard = draggedCard[0];\r\n\t\thitElement = GameState.elements.tableaus.find(t => isColliding(topCard, t));\r\n\t\tif (hitElement && hitElement.isPushable(topCard)) {\r\n\t\t\tdraggedCard.forEach(dc => {\r\n\t\t\t\tdc.parent.remove(dc);\r\n\t\t\t\thitElement.push(dc);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tdraggedCard.forEach(dc => dc.reset());\r\n\t\t}\r\n\t\tdraggedCard = null;\r\n\t}\r\n\r\n\tisDown = false;\r\n\r\n\tdraw();\r\n}\r\n"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","CARD_WIDTH","CARD_HEIGHT","CARD_SIZE_X","CARD_SIZE_Y","CANVAS_WIDTH","documentElement","clientWidth","CANVAS_HEIGHT","clientHeight","SUITS_TO_COLORS","Sprites","Image","GameState","elements","foundations","tableaus","cards","deck","win","canvas","getElementById","ctx","getContext","onmouseup","e","handleMouseUp","onmousedown","handleMouseDown","onmousemove","handleMouseMove","width","height","onload","setup","src","lastMousePoint","isDown","draggedCard","Array","prototype","random","randomIndex","Math","floor","length","last","isColliding","rect1","rect2","point","x","y","getMousePos","evt","rect","getBoundingClientRect","Point","clientX","left","clientY","top","isClicked","mousePoint","element","heightHit","widthHit","checkWinState","every","f","topCard","number","translate","xAmount","yAmount","Deck","reset","remove","card","splice","indexOf","push","parent","hidden","origPoint","Object","assign","draw","save","fillStyle","strokeStyle","fillRect","strokeRect","restore","Card","suit","children","color","drawImage","Foundation","nextNumber","isPushable","forEach","c","defineProperty","get","Tableau","showCard","nextFoundationPoint","nextTableauPoint","i","j","t","index","randomCard","deckPos","clearRect","font","gradient","createLinearGradient","addColorStop","fillText","preventDefault","stopPropagation","shownCards","filter","reverse","clickedCardIndex","findIndex","slice","pop","dx","dy","isArray","hitElement","find","dc"],"mappings":"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"}